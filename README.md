# Информационная система агентства недвижимости

Система для управления агентством недвижимости, специализирующимся на аренде объектов недвижимости.

## Технологии

- **Python 3.7+**
- **PyQt5** - графический интерфейс
- **SQLite** - база данных

## Установка

1. Установите Python 3.7 или выше
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Запуск

### Запуск из исходников:
```bash
python main.py
```

### Запуск исполняемого файла:
Запустите `dist/АгентствоНедвижимости.exe` (Windows)

## Функциональность

### Управление клиентами
- Создание, редактирование, удаление клиентов
- Поиск по ФИО, телефону, email
- Просмотр связанных предложений и потребностей
- Валидация: обязательно указать телефон или email

### Управление риэлторами
- Создание, редактирование, удаление риэлторов
- Поиск по ФИО
- Настройка доли от комиссии (по умолчанию 45%)
- Просмотр связанных предложений и потребностей

### Управление объектами недвижимости
- Создание, редактирование, удаление объектов
- Поддержка трех типов: квартира, дом, земля
- Фильтрация по типу, городу, улице
- Хранение адреса и координат
- Специфичные поля для каждого типа:
  - **Квартира**: этаж, количество комнат, площадь
  - **Дом**: этажность, количество комнат, площадь
  - **Земля**: площадь

### Управление предложениями
- Создание, редактирование, удаление предложений
- Привязка к клиенту, риэлтору и объекту недвижимости
- Указание цены и срока сдачи
- Защита от удаления предложений, участвующих в сделках

### Управление потребностями
- Создание, редактирование, удаление потребностей
- Привязка к клиенту и риэлтору
- Указание типа объекта, адреса, диапазона цен и срока аренды
- Специфичные требования для каждого типа объекта
- Защита от удаления потребностей, участвующих в сделках

### Управление сделками
- Создание, редактирование, удаление сделок
- Автоматический расчет комиссий:
  - **Для продавца (арендодателя)**:
    - Квартира: 3000 + стоимость аренды за месяц
    - Земля: 5000 + 5% от стоимости аренды за год
    - Дом: 5000 + 25% от стоимости дома за месяц
  - **Для покупателя (арендатора)**: 10% от стоимости аренды
- Расчет отчислений риэлторам и компании
- Проверка соответствия предложения потребности

## Структура проекта

```
RAS/
├── main.py                      # Главный файл приложения
├── database.py                  # Модуль работы с базой данных
├── commission_calculator.py     # Расчет комиссий
├── requirements.txt             # Зависимости проекта
├── widgets/                     # Модули интерфейса
│   ├── clients_widget.py
│   ├── realtors_widget.py
│   ├── properties_widget.py
│   ├── offers_widget.py
│   ├── demands_widget.py
│   └── deals_widget.py
└── dist/                        # Исполняемый файл
    └── АгентствоНедвижимости.exe
```

## База данных

База данных SQLite создается автоматически при первом запуске. Файл: `real_estate.db`

### Основные таблицы:
- `realtors` - риэлторы
- `clients` - клиенты
- `properties` - объекты недвижимости
- `apartments`, `houses`, `lands` - специфичные данные объектов
- `offers` - предложения
- `demands` - потребности
- `apartment_demands`, `house_demands`, `land_demands` - специфичные данные потребностей
- `deals` - сделки

## Бизнес-логика

### Проверка соответствия предложения потребности

Предложение удовлетворяет потребность, если:
1. Тип объекта недвижимости совпадает
2. Адрес совпадает (если указан в потребности)
3. Цена входит в диапазон потребности
4. Срок аренды соответствует требованиям
5. Дополнительные параметры (площадь, этаж, комнаты и т.д.) соответствуют требованиям

### Расчет комиссий

Комиссии рассчитываются автоматически при создании/просмотре сделки:
- Комиссия продавца зависит от типа объекта
- Комиссия покупателя - 10% от стоимости аренды
- Отчисления риэлторам рассчитываются по их доле (по умолчанию 45%)
- Остаток идет компании

## Создание исполняемого файла

Для создания exe файла используйте PyInstaller:

```bash
pip install pyinstaller
pyinstaller --onefile --windowed --name="АгентствоНедвижимости" main.py
```

Файл будет создан в папке `dist/`.
